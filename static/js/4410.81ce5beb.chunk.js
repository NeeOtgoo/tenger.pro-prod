"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[4410],{68470:function(e,t,n){n(72791);var r=n(80184),a=function(e){var t=e.children,n=e.className,a=e.alignItems,c=e.justifyContent,i=e.mobileFlex,l=e.flexDirection;return(0,r.jsx)("div",{className:"".concat(i?"d-flex":"d-md-flex"," ").concat(n," ").concat(l?"flex-"+l:""," ").concat(a?"align-items-"+a:""," ").concat(c?"justify-content-"+c:""),children:t})};a.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},t.Z=a},90914:function(e,t,n){n.d(t,{Tr:function(){return d},_j:function(){return m},x5:function(){return s},yt:function(){return u}});var r,a,c,i,l=n(30168),o=n(27570),s=(0,o.Ps)(r||(r=(0,l.Z)(["\n    query allProgramSubjectByProgram ($id: Int!) {\n        allProgramSubjectByProgram (id: $id) {\n            id\n            program {\n                id\n                program\n            }\n            subject {\n                id\n                subject\n                subjectMgl\n                credit\n            }\n        }\n    }\n"]))),d=(0,o.Ps)(a||(a=(0,l.Z)(["\n    query programById ($id: Int!) {\n        programById (id: $id) {\n            id\n        }\n    }\n\n"]))),u=(0,o.Ps)(c||(c=(0,l.Z)(["\n    mutation createProgramSubject ($program: Int, $subject: Int) {\n        createProgramSubject (program: $program, subject: $subject) {\n            programSubject {\n                id\n            }\n        }\n    }\n"]))),m=(0,o.Ps)(i||(i=(0,l.Z)(["\n    mutation deleteProgramSubject ($id: ID) {\n        deleteProgramSubject (id: $id) {\n            programSubject {\n                program {\n                    program\n                }\n            }\n        }\n    }\n"])))},68694:function(e,t,n){n.d(t,{Cm:function(){return p},Cx:function(){return m},FQ:function(){return f},JX:function(){return u},dT:function(){return b},tL:function(){return g}});var r,a,c,i,l,o,s=n(30168),d=n(27570),u=(0,d.Ps)(r||(r=(0,s.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),m=(0,d.Ps)(a||(a=(0,s.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),f=(0,d.Ps)(c||(c=(0,s.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n            classesNumeric\n        }\n\t}\n"]))),p=(0,d.Ps)(i||(i=(0,s.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject \n            subjectCode\n            credit\n        }\n    }\n']))),b=(0,d.Ps)(l||(l=(0,s.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n            programNumeric\n        }\n    }\n"]))),g=(0,d.Ps)(o||(o=(0,s.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"])))},54410:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(72791),a=n(64880),c=n(96578),i=n(38937),l=n(29439),o=n(20003),s=n(50419),d=n(87309),u=n(66871),m=n(49389),f=n(37083),p=n(59432),b=n(82464),g=n(53834),v=n(11730),j=n(31549),Z=n(68470),x=n(2703),y=n(22949),h=n(73332),E=n(69421),P=n(86586),C=n(84376),S=n(90914),N=n(82630),O=n(68694),w=n(80184),k=y.Z.Option;var I=function(e){var t=e.program,n=e.setIsModalVisible,a=h.Z.useForm(),c=(0,l.Z)(a,1)[0],o=(0,r.useState)([]),d=(0,l.Z)(o,2),u=d[0],m=d[1],p=(0,P.t)(O.Cm,{onCompleted:function(e){m(e.allSubjects)}}),b=(0,l.Z)(p,2),g=b[0],v=b[1].loading,j=(0,C.D)(S.yt,{refetchQueries:[{query:S.x5,variables:{id:t}}],onCompleted:function(e){s.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),n(!1)}}),Z=(0,l.Z)(j,2),x=Z[0],I=Z[1].loading;return(0,w.jsx)(f.Z,{spinning:I,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,w.jsx)(h.Z,{id:"SchoolForm",layout:"vertical",form:c,name:"school",onFinish:function(e){e.program=t,x({variables:e})},children:(0,w.jsx)(h.Z.Item,{name:"subject",label:(0,w.jsx)(N.Z,{id:"subject"}),rules:[{required:!0,message:(0,w.jsx)(N.Z,{id:"form.required"})}],children:(0,w.jsx)(y.Z,{showSearch:!0,filterOption:!1,notFoundContent:v?(0,w.jsx)(i.Z,{cover:"content"}):(0,w.jsx)(E.Z,{image:E.Z.PRESENTED_IMAGE_SIMPLE}),onSearch:function(e){""===e?m([]):g({variables:{offset:0,limit:1e7,filter:e}})},children:u.map((function(e,t){return(0,w.jsxs)(k,{value:e.id,children:[e.subject," ","(".concat(Math.floor(e.credit),")")," / ",e.subjectCode]},t)}))})})})})};var T=function(e){var t=(0,r.useState)([]),n=(0,l.Z)(t,2),i=n[0],y=n[1],h=(0,r.useState)(""),E=(0,l.Z)(h,2),P=E[0],O=E[1],k=(0,a.k6)(),T=(0,c.a)(S.x5,{variables:{id:e.program}}),$=T.loading,B=T.refetch,F=T.data;(0,r.useEffect)((function(){!1===$&&F&&y(F.allProgramSubjectByProgram)}),[F,$]);var _=o.Z.confirm,q=(0,C.D)(S._j,{onCompleted:function(e){B(),s.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),M=(0,l.Z)(q,1)[0],K=[{title:(0,w.jsx)(N.Z,{id:"subject"}),dataIndex:["subject","subject"],key:"subject",width:"40vw",sorter:function(e,t){return x.ZP.antdTableSorter(e,t,"subject")}},{title:(0,w.jsx)(N.Z,{id:"subjectMgl"}),dataIndex:["subject","subjectMgl"],key:"subject",width:"40vw",sorter:function(e,t){return x.ZP.antdTableSorter(e,t,"subject")}}];e.permissions.destroy&&K.push({title:(0,w.jsx)(N.Z,{id:"main.action"}),key:"actions",dataIndex:"actions",width:"20vw",render:function(t,n){return(0,w.jsx)("div",{className:"text-center",children:!0===e.permissions.destroy&&(0,w.jsxs)(d.Z,{size:"small",onClick:function(){return e=n,void _({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){M({variables:{id:e.id}})}});var e},type:"text",icon:(0,w.jsx)(b.Z,{twoToneColor:"#f42f2f"}),children:[" ",(0,w.jsx)(N.Z,{id:"delete"})]})})}});var z=(0,r.useState)(!1),D=(0,l.Z)(z,2),A=D[0],L=D[1];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z,{forceRender:!0,title:"edit"===P?(0,w.jsx)(N.Z,{id:"edit"}):(0,w.jsx)(N.Z,{id:"add_new"}),visible:A,okText:(0,w.jsx)(N.Z,{id:"main.okText"}),cancelText:(0,w.jsx)(N.Z,{id:"main.cancelText"}),onCancel:function(){L(!1)},okButtonProps:{form:"SchoolForm",key:"submit",htmlType:"submit"},children:(0,w.jsx)(I,{program:e.program,formType:P,setIsModalVisible:L})}),(0,w.jsx)(Z.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:(0,w.jsx)(Z.Z,{mobileFlex:!1,children:(0,w.jsx)("div",{className:"text-right",children:(0,w.jsxs)(d.Z,{onClick:function(){return k.goBack()},type:"default",icon:(0,w.jsx)(g.Z,{}),block:!0,children:[" ",(0,w.jsx)(N.Z,{id:"back"})]})})})}),(0,w.jsxs)(u.Z,{className:"mt-3",children:[(0,w.jsxs)(Z.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[(0,w.jsx)(Z.Z,{className:"mb-1",mobileFlex:!1,children:(0,w.jsx)("div",{className:"mr-md-3 mb-3",children:(0,w.jsx)(m.Z,{placeholder:"\u0425\u0430\u0439\u0445",prefix:(0,w.jsx)(v.Z,{}),onChange:function(e){return function(e){var t=e.currentTarget.value,n=e.currentTarget.value?i:F.allProgramSubjectByProgram,r=x.ZP.wildCardSearch(n,t);y(r)}(e)}})})}),!0===e.permissions.create&&(0,w.jsx)("div",{className:"mr-md-3 mb-3",children:(0,w.jsxs)(d.Z,{onClick:function(){O("create"),L(!0)},type:"primary",icon:(0,w.jsx)(j.Z,{}),block:!0,children:[" ",(0,w.jsx)(N.Z,{id:"add_new"})]})})]}),(0,w.jsx)(f.Z,{spinning:$,children:(0,w.jsx)("div",{className:"table-responsive",children:(0,w.jsx)(p.Z,{columns:K,dataSource:i,size:"small",rowKey:"id",bordered:!0})})})]})]})},$=n(59288),B=n(59305),F=function(e){var t=(0,a.k6)(),n=(0,a.UO)(),r=(0,c.a)(S.Tr,{variables:{id:n.program}}),l=r.data,o=r.loading,s={create:(0,$.C)("add_program_subject"),edit:(0,$.C)("change_program_subject"),destroy:(0,$.C)("delete_program_subject")};return!1===o&&null===l.programById&&t.push("".concat(B.sH,"/programs")),o||Object.values(s).indexOf("loading")>-1?(0,w.jsx)(i.Z,{cover:"content"}):(0,w.jsx)(T,{title:e.title,permissions:s,program:l.programById.id})}},53834:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1413),a=n(72791),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},i=n(8711),l=function(e,t){return a.createElement(i.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:c}))};l.displayName="RollbackOutlined";var o=a.forwardRef(l)},66871:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(4942),a=n(87462),c=n(72791),i=n(81694),l=n.n(i),o=n(41818),s=n(69077),d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},u=function(e){var t=e.prefixCls,n=e.className,i=e.hoverable,o=void 0===i||i,u=d(e,["prefixCls","className","hoverable"]);return c.createElement(s.C,null,(function(e){var i=(0,e.getPrefixCls)("card",t),s=l()("".concat(i,"-grid"),n,(0,r.Z)({},"".concat(i,"-grid-hoverable"),o));return c.createElement("div",(0,a.Z)({},u,{className:s}))}))},m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},f=function(e){return c.createElement(s.C,null,(function(t){var n=t.getPrefixCls,r=e.prefixCls,i=e.className,o=e.avatar,s=e.title,d=e.description,u=m(e,["prefixCls","className","avatar","title","description"]),f=n("card",r),p=l()("".concat(f,"-meta"),i),b=o?c.createElement("div",{className:"".concat(f,"-meta-avatar")},o):null,g=s?c.createElement("div",{className:"".concat(f,"-meta-title")},s):null,v=d?c.createElement("div",{className:"".concat(f,"-meta-description")},d):null,j=g||v?c.createElement("div",{className:"".concat(f,"-meta-detail")},g,v):null;return c.createElement("div",(0,a.Z)({},u,{className:p}),b,j)}))},p=n(74439),b=n(66106),g=n(30914),v=n(1815),j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var Z=function(e){var t,n,i,d=c.useContext(s.E_),m=d.getPrefixCls,f=d.direction,Z=c.useContext(v.Z),x=e.prefixCls,y=e.className,h=e.extra,E=e.headStyle,P=void 0===E?{}:E,C=e.bodyStyle,S=void 0===C?{}:C,N=e.title,O=e.loading,w=e.bordered,k=void 0===w||w,I=e.size,T=e.type,$=e.cover,B=e.actions,F=e.tabList,_=e.children,q=e.activeTabKey,M=e.defaultActiveTabKey,K=e.tabBarExtraContent,z=e.hoverable,D=e.tabProps,A=void 0===D?{}:D,L=j(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),R=m("card",x),H=0===S.padding||"0px"===S.padding?{padding:24}:void 0,V=c.createElement("div",{className:"".concat(R,"-loading-block")}),G=c.createElement("div",{className:"".concat(R,"-loading-content"),style:H},c.createElement(b.Z,{gutter:8},c.createElement(g.Z,{span:22},V)),c.createElement(b.Z,{gutter:8},c.createElement(g.Z,{span:8},V),c.createElement(g.Z,{span:15},V)),c.createElement(b.Z,{gutter:8},c.createElement(g.Z,{span:6},V),c.createElement(g.Z,{span:18},V)),c.createElement(b.Z,{gutter:8},c.createElement(g.Z,{span:13},V),c.createElement(g.Z,{span:9},V)),c.createElement(b.Z,{gutter:8},c.createElement(g.Z,{span:4},V),c.createElement(g.Z,{span:3},V),c.createElement(g.Z,{span:16},V))),Q=void 0!==q,J=(0,a.Z)((0,a.Z)({},A),(t={},(0,r.Z)(t,Q?"activeKey":"defaultActiveKey",Q?q:M),(0,r.Z)(t,"tabBarExtraContent",K),t)),U=F&&F.length?c.createElement(p.Z,(0,a.Z)({size:"large"},J,{className:"".concat(R,"-head-tabs"),onChange:function(t){var n;null===(n=e.onTabChange)||void 0===n||n.call(e,t)}}),F.map((function(e){return c.createElement(p.Z.TabPane,{tab:e.tab,disabled:e.disabled,key:e.key})}))):null;(N||h||U)&&(i=c.createElement("div",{className:"".concat(R,"-head"),style:P},c.createElement("div",{className:"".concat(R,"-head-wrapper")},N&&c.createElement("div",{className:"".concat(R,"-head-title")},N),h&&c.createElement("div",{className:"".concat(R,"-extra")},h)),U));var X=$?c.createElement("div",{className:"".concat(R,"-cover")},$):null,W=c.createElement("div",{className:"".concat(R,"-body"),style:S},O?G:_),Y=B&&B.length?c.createElement("ul",{className:"".concat(R,"-actions")},function(e){return e.map((function(t,n){return c.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(n)},c.createElement("span",null,t))}))}(B)):null,ee=(0,o.Z)(L,["onTabChange"]),te=I||Z,ne=l()(R,(n={},(0,r.Z)(n,"".concat(R,"-loading"),O),(0,r.Z)(n,"".concat(R,"-bordered"),k),(0,r.Z)(n,"".concat(R,"-hoverable"),z),(0,r.Z)(n,"".concat(R,"-contain-grid"),function(){var t;return c.Children.forEach(e.children,(function(e){e&&e.type&&e.type===u&&(t=!0)})),t}()),(0,r.Z)(n,"".concat(R,"-contain-tabs"),F&&F.length),(0,r.Z)(n,"".concat(R,"-").concat(te),te),(0,r.Z)(n,"".concat(R,"-type-").concat(T),!!T),(0,r.Z)(n,"".concat(R,"-rtl"),"rtl"===f),n),y);return c.createElement("div",(0,a.Z)({},ee,{className:ne}),i,X,W,Y)};Z.Grid=u,Z.Meta=f;var x=Z}}]);
//# sourceMappingURL=4410.81ce5beb.chunk.js.map