"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[7018],{40872:function(n,e,t){t(72791);var i=t(32385),l=t(92885),s=t(75033),o=t(80184),r=function(n){return(0,o.jsx)(i.Z,{overlay:n.menu,placement:n.placement,trigger:["click"],children:(0,o.jsx)("div",{className:"ellipsis-dropdown",children:(0,o.jsx)(s.Z,{})})})};r.defaultProps={trigger:"click",placement:"bottomRight",menu:(0,o.jsx)(l.Z,{})},e.Z=r},68470:function(n,e,t){t(72791);var i=t(80184),l=function(n){var e=n.children,t=n.className,l=n.alignItems,s=n.justifyContent,o=n.mobileFlex,r=n.flexDirection;return(0,i.jsx)("div",{className:"".concat(o?"d-flex":"d-md-flex"," ").concat(t," ").concat(r?"flex-"+r:""," ").concat(l?"align-items-"+l:""," ").concat(s?"justify-content-"+s:""),children:e})};l.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=l},25566:function(n,e,t){t.d(e,{$A:function(){return G},Ap:function(){return k},Ho:function(){return Y},K_:function(){return E},ND:function(){return H},OV:function(){return X},S8:function(){return R},U7:function(){return _},Vv:function(){return q},bb:function(){return w},ds:function(){return U},eX:function(){return B},iZ:function(){return M},j$:function(){return A},kZ:function(){return D},mq:function(){return T},oJ:function(){return V},q$:function(){return C},sZ:function(){return L},u$:function(){return N},vX:function(){return z},zN:function(){return P}});var i,l,s,o,r,c,d,u,a,f,m,p,$,x,b,h,y,j,S,Z,g,v,O,F=t(30168),I=t(27570),L=(0,I.Ps)(i||(i=(0,F.Z)(["\n    query allOnlineTypes {\n        allOnlineTypes {\n            id\n            name\n        }\n    }\n\n"]))),C=(0,I.Ps)(l||(l=(0,F.Z)(["\n    query allOnlineFiles ($folder: Int){\n        allOnlineFiles (folder: $folder){\n            id\n            file\n        }\n    }\n"]))),P=(0,I.Ps)(s||(s=(0,F.Z)(["\n    query allFolders ($folder: Int){\n        allFolders(folder: $folder){\n            id\n            name\n        }\n    }\n    "]))),w=(0,I.Ps)(o||(o=(0,F.Z)(["\n    mutation createOnlineFile($file: Upload!, $folder: Int) {\n        createOnlineFile(file: $file, folder: $folder) {\n            onlineFile {\n                id\n                file\n            }\n        }\n    }\n"]))),N=(0,I.Ps)(r||(r=(0,F.Z)(["\n    mutation createOnlineFileFolder($name: String, $subFolder: Int){\n        createOnlineFileFolder(name: $name, subFolder: $subFolder){\n            onlineFileFolder{\n                id\n            }\n        }\n    }\n"]))),T=(0,I.Ps)(c||(c=(0,F.Z)(["\n    mutation deleteOnlineFile ($id: ID) {\n        deleteOnlineFile (id: $id) {\n            onlineFile {\n                file\n            }\n        }\n    }\n"]))),k=(0,I.Ps)(d||(d=(0,F.Z)(["\n    mutation deleteOnlineFileFolder ($id: Int){\n        deleteOnlineFileFolder (id: $id){\n            onlineFileFolder {\n                name\n            }\n        }\n    }\n"]))),_=(0,I.Ps)(u||(u=(0,F.Z)(["\n    mutation createOnlineLesson ($content: String, $description: String, $schoolyear: Int, $status: String, $subject: Int) {\n        createOnlineLesson (content: $content, description: $description, schoolyear: $schoolyear, status: $status, subject: $subject) {\n            onlineLesson {\n                id\n            }\n        }\n    }\n"]))),D=(0,I.Ps)(a||(a=(0,F.Z)(["\n    mutation updateOnlineLesson ($content: String, $description: String, $id: ID, $schoolyear: Int, $status: String, $subject: Int) {\n        updateOnlineLesson (content: $content, description: $description, id: $id, schoolyear: $schoolyear, status: $status, subject: $subject) {\n            onlineLesson {\n                id\n            }\n        }\n    }\n"]))),q=(0,I.Ps)(f||(f=(0,F.Z)(['\n    query allOnlineLessons ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "online_lesson", modelName: "Online_lesson", filter: $filter) {\n            count\n        }\n        allOnlineLessons (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            schoolyear {\n                id\n                schoolyear\n            }\n            subject {\n                id\n                subject\n            }\n            description\n            content\n            status\n            createUserid {\n                isTeacher\n                teacher {\n                    name\n                }\n            }\n        }\n    }\n']))),B=(0,I.Ps)(m||(m=(0,F.Z)(["\n    query onlineLessonById ($id: Int!) {\n        onlineLessonById (id: $id) {\n            id\n            schoolyear {\n                schoolyear\n                id\n            }\n            subject {\n                subject\n                id\n            }\n            description\n            content\n            status\n        }\n    }\n"]))),A=(0,I.Ps)(p||(p=(0,F.Z)(["\n    mutation deleteOnlineLesson ($id: ID) {\n        deleteOnlineLesson (id: $id) {\n            onlineLesson {\n                status\n            }\n        }\n    }\n"]))),U=(0,I.Ps)($||($=(0,F.Z)(["\n    query allOnlineSubByLesson ($onlineLesson: Int!) {\n        allOnlineSubByLesson (onlineLesson: $onlineLesson) {\n            id\n            title\n            description\n            content\n            createUserid {\n                isTeacher\n                teacher {\n                    name\n                }\n            }\n            onlineType {\n                id\n                name\n            }\n            onlineSubFileSet {\n                id\n                onlineFile {\n                    id\n                    file\n                }\n            }\n            status\n            createdAt\n        }\n    }\n"]))),z=(0,I.Ps)(x||(x=(0,F.Z)(["\n    mutation createOnlineSub ($content: String, $description: String, $onlineLesson: Int, $status: String, $title: String, $onlineType: Int) {\n        createOnlineSub (content: $content, description: $description, onlineLesson: $onlineLesson, status: $status, title: $title, onlineType: $onlineType) {\n            onlineSub {\n                id\n            }\n        }\n    }\n"]))),E=(0,I.Ps)(b||(b=(0,F.Z)(["\n    mutation updateOnlineSub ($content: String, $description: String, $id: ID, $onlineLesson: Int, $status: String, $title: String, $onlineType: Int) {\n        updateOnlineSub (content: $content, description: $description, id: $id, onlineLesson: $onlineLesson, status: $status, title: $title, onlineType: $onlineType) {\n            onlineSub {\n                id\n            }\n        }\n    }\n"]))),M=(0,I.Ps)(h||(h=(0,F.Z)(["\n    mutation deleteOnlineSub ($id: ID) {\n        deleteOnlineSub (id: $id) {\n            onlineSub {\n                title\n            }\n        }\n    }\n"]))),V=(0,I.Ps)(y||(y=(0,F.Z)(["\n    query onlineSubById ($id: Int!) {\n        onlineSubById (id: $id) {\n            title\n            description\n            content\n            onlineLesson {\n                subject {\n                    subject\n                }\n            }\n            onlineSubFileSet {\n                id\n                onlineFile {\n                    id\n                    file\n                }\n            }\n            onlineType {\n                id\n                name\n            }\n            onlineAttendanceSet {\n                student {\n                    id\n                    studentCode\n                    name\n                    familyName\n                }\n            }\n            status\n            createdAt\n        }\n    } \n"]))),Y=(0,I.Ps)(j||(j=(0,F.Z)(['\n    mutation createOnlineStudent ($onlineLesson: Int, $studentCode: String = "", $section: Int = 0) {\n        createOnlineStudent (onlineLesson: $onlineLesson, studentCode: $studentCode, section: $section) {\n            onlineStudent {\n                id\n            }\n        }\n    }\n']))),H=(0,I.Ps)(S||(S=(0,F.Z)(["\n    mutation deleteOnlineStudent ($id: ID) {\n        deleteOnlineStudent (id: $id) {\n            onlineStudent {\n                student {\n                    name\n                }\n            }\n        }\n    }\n"]))),R=(0,I.Ps)(Z||(Z=(0,F.Z)(["\n    query allOnlineStudentByLesson ($onlineLesson: Int!) {\n        allOnlineStudentByLesson (onlineLesson: $onlineLesson) {\n            id\n            student {\n                id\n                familyName\n                name\n                studentCode\n            }\n        }\n    }\n"]))),G=((0,I.Ps)(g||(g=(0,F.Z)(["\n    query allOnlineSubFiles ($onlineSub: Int) {\n        allOnlineSubFiles (onlineSub: $onlineSub) {\n            id\n            onlineFile {\n                id\n                file\n            }\n        }\n    }\n"]))),(0,I.Ps)(v||(v=(0,F.Z)(["\n    mutation createOnlineSubFile ($onlineFile: Int, $onlineSub: Int) {\n        createOnlineSubFile (onlineFile: $onlineFile, onlineSub: $onlineSub) {\n            onlineSubFile {\n                id\n            }\n        }\n    }\n"])))),X=(0,I.Ps)(O||(O=(0,F.Z)(["\n    mutation deleteOnlineSubFile ($id: Int) {\n        deleteOnlineSubFile (id: $id) {\n            onlineSubFile {\n                onlineSub {\n                    id\n                }\n            }\n        }\n    }\n"])))},3211:function(n,e,t){t.r(e),t.d(e,{default:function(){return _}});var i=t(72791),l=t(29439),s=t(86586),o=t(84376),r=t(20003),c=t(50419),d=t(87309),u=t(7405),a=t(36795),f=t(1413),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"},p=t(8711),$=function(n,e){return i.createElement(p.Z,(0,f.Z)((0,f.Z)({},n),{},{ref:e,icon:m}))};$.displayName="UsergroupAddOutlined";var x=i.forwardRef($),b=t(82464),h=t(31549),y=t(79335),j=t(91523),S=t(72426),Z=t.n(S),g=t(68470),v=t(25566),O=t(82630),F=t(74508),I=t(59305),L=t(38937),C=t(39392),P=t(40872),w=t(80184),N=(0,i.lazy)((function(){return Promise.all([t.e(3332),t.e(4033),t.e(6809),t.e(3088)]).then(t.bind(t,99199))})),T=function(n){var e=(0,i.useState)([]),t=(0,l.Z)(e,2),f=t[0],m=t[1],p=(0,i.useState)(1),$=(0,l.Z)(p,2),S=$[0],T=$[1],k=r.Z.confirm,_=(0,s.t)(v.Vv,{nextFetchPolicy:"network-only",onCompleted:function(n){T(n.count.count),m(n.allOnlineLessons)}}),D=(0,l.Z)(_,2),q=D[0],B=D[1],A=B.loading,U=B.refetch,z=(0,o.D)(v.j$,{onCompleted:function(n){U(),c.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),E=(0,l.Z)(z,1)[0];(0,i.useEffect)((function(){q({variables:{offset:0,limit:10,filter:""}})}),[q]);var M=(0,i.useState)(!1),V=(0,l.Z)(M,2),Y=V[0],H=V[1],R=(0,i.useState)([]),G=(0,l.Z)(R,2),X=G[0],J=G[1],K=(0,i.useState)(""),Q=(0,l.Z)(K,2),W=Q[0],nn=Q[1],en=function(e){return(0,w.jsxs)("div",{className:"w-full flex flex-col space-y-2 bg-background p-2 rounded-2",onClick:function(n){return n&&n.stopPropagation&&n.stopPropagation()},children:[!0===n.permissions.edit&&(0,w.jsx)(d.Z,{onClick:function(){return J(e),nn("edit"),void H(!0)},children:(0,w.jsx)(a.Z,{twoToneColor:"#ffdb00"})}),!0===n.permissions.view_student&&(0,w.jsx)(j.rU,{to:"/app/online-lesson-students/".concat(e.id),children:(0,w.jsx)(d.Z,{children:(0,w.jsx)(x,{})})}),!0===n.permissions.destroy&&(0,w.jsx)(d.Z,{onClick:function(){return n=e.id,void k({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){E({variables:{id:n}})}});var n},children:(0,w.jsx)(b.Z,{twoToneColor:"#f42f2f"})})]})};return A?(0,w.jsx)(L.Z,{}):(0,w.jsxs)("div",{children:[!0===n.permissions.create&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.Z,{forceRender:!0,width:"80vw",visible:Y,okText:(0,w.jsx)(O.Z,{id:"main.okText"}),cancelText:(0,w.jsx)(O.Z,{id:"main.cancelText"}),onCancel:function(){H(!1)},okButtonProps:{form:"LessonForm",key:"submit",htmlType:"submit"},children:(0,w.jsx)(N,{formType:W,setIsModalVisible:H,editData:X})}),(0,w.jsx)(g.Z,{justifyContent:"end",alignItems:"center",className:"py-2",children:(0,w.jsx)("div",{children:(0,w.jsxs)(d.Z,{style:{float:"right"},size:"small",type:"primary",onClick:function(){return nn("create"),void H(!0)},children:[(0,w.jsx)(h.Z,{}),"  ",(0,w.jsx)(O.Z,{id:"add_new"})]})})})]}),(0,w.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 w-full mt-4",children:f.map((function(n,e){var t;return(0,w.jsxs)(j.rU,{to:"".concat(I.sH,"/online-lesson/").concat(n.id),className:"border-regular border-1 pt-[20px] px-[25px] pb-[25px] bg-white rounded-10 bg-cover bg-center",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("h4",{className:"text-[16px] font-medium items-center mb-[14px] flex gap-[10px]",children:(0,w.jsx)("span",{children:n.subject.subject})}),(0,w.jsx)(P.Z,{menu:en(n)})]}),(0,w.jsx)("div",{children:(0,w.jsx)(y.$B,{style:{height:200},children:(0,w.jsx)("p",{className:"mb-[20px] leading-[1.786] whitespace-pre-line",children:n.description})})}),(0,w.jsxs)("div",{className:"flex flex-wrap items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center gap-[15px]",children:[(0,w.jsx)("img",{className:"w-[30px] h-[30px] rounded-full",src:C,alt:""}),(0,w.jsx)("span",{className:"text-[15px] font-medium ",children:null===(t=n.createUserid.teacher)||void 0===t?void 0:t.name})]}),(0,w.jsxs)("div",{className:"flex items-center gap-[15px]",children:[(0,w.jsx)(F.Z,{className:"h-7 text-emind"}),(0,w.jsx)("p",{children:Z()(n.createdAt).format("YYYY-MM-DD")})]})]})]},e)}))}),S>0&&(0,w.jsx)(u.Z,{className:"text-right mt-4",total:S,onChange:function(n,e){!function(n,e){var t=0,i=e;1!==n&&(t=n*e-e,i=e*n),q({variables:{offset:t,limit:i-1,filter:""}})}(n,e)}})]})},k=t(59288),_=function(n){var e=(0,k.C)("add_online_lesson"),t=(0,k.C)("change_online_lesson"),i=(0,k.C)("delete_online_lesson"),l={create:e,create_sub:(0,k.C)("add_online_sub"),edit:t,destroy:i,view_student:(0,k.C)("view_online_student")};return Object.values(l).indexOf("loading")>-1?(0,w.jsx)(L.Z,{cover:"content"}):(0,w.jsx)(T,{title:n.title,permissions:l})}},96096:function(n,e,t){t.d(e,{GL:function(){return o},fk:function(){return r},jD:function(){return s}});var i,l=t(14937),s=function(){return(0,l.Z)()&&window.document.documentElement},o=function(n){if(s()){var e=Array.isArray(n)?n:[n],t=window.document.documentElement;return e.some((function(n){return n in t.style}))}return!1},r=function(){if(!s())return!1;if(void 0!==i)return i;var n=document.createElement("div");return n.style.display="flex",n.style.flexDirection="column",n.style.rowGap="1px",n.appendChild(document.createElement("div")),n.appendChild(document.createElement("div")),document.body.appendChild(n),i=1===n.scrollHeight,document.body.removeChild(n),i}}}]);
//# sourceMappingURL=7018.68048dad.chunk.js.map