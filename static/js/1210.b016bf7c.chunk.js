(self.webpackChunkemind=self.webpackChunkemind||[]).push([[1210],{68470:function(e,t,n){"use strict";n(72791);var i=n(80184),r=function(e){var t=e.children,n=e.className,r=e.alignItems,s=e.justifyContent,o=e.mobileFlex,c=e.flexDirection;return(0,i.jsx)("div",{className:"".concat(o?"d-flex":"d-md-flex"," ").concat(n," ").concat(c?"flex-"+c:""," ").concat(r?"align-items-"+r:""," ").concat(s?"justify-content-"+s:""),children:t})};r.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},t.Z=r},70606:function(e,t,n){"use strict";var i=n(1413),r=n(29439),s=n(72791),o=n(43110),c=n(88894),a=n(2703),l=n(96324),u=n(80184),d=o.ZP.useBreakpoint,p=function(e){var t=e.sideContent,n=e.sideContentWidth,i=void 0===n?250:n,r=e.border;return(0,u.jsx)("div",{className:"side-content ".concat(r?"with-border":""),style:{width:"".concat(i,"px")},children:t})},f=function(e){var t=e.sideContent,n=e.visible,i=e.onSideContentClose;return(0,u.jsx)(c.Z,{width:320,placement:"left",closable:!1,onClose:i,visible:n,bodyStyle:{paddingLeft:0,paddingRight:0},children:(0,u.jsx)("div",{className:"h-100",children:t})})};t.Z=function(e){var t=e.mainContent,n=e.pageHeader,o=e.sideContentGutter,c=void 0===o||o,m=!a.ZP.getBreakPoint(d()).includes("lg"),x=(0,s.useState)(!1),h=(0,r.Z)(x,2),Z=h[0],j=h[1];return(0,u.jsxs)("div",{className:"inner-app-layout",children:[m?(0,u.jsx)(f,(0,i.Z)({visible:Z,onSideContentClose:function(e){j(!1)}},e)):(0,u.jsx)(p,(0,i.Z)({},e)),(0,u.jsxs)("div",{className:"main-content ".concat(n?"has-page-header":""," ").concat(c?"gutter":"no-gutter"),children:[m?(0,u.jsx)("div",{className:"font-size-lg mb-3 ".concat(c?"":"pt-3 px-3"),children:(0,u.jsx)(l.Z,{onClick:function(){j(!0)}})}):null,t]})]})}},53905:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ee}});var i,r,s,o,c,a,l,u=n(29439),d=n(72791),p=n(30941),f=n(20003),m=n(92885),x=n(50419),h=n(66871),Z=n(36755),j=n(87309),g=n(55064),v=n(70606),S=n(59288),C=n(31549),b=n(72351),y=n(82622),w=n(31752),k=n(73332),$=n(22949),N=n(49389),P=n(37083),F=n(84376),O=n(96578),T=n(30168),_=n(27570),D=(0,_.Ps)(i||(i=(0,T.Z)(["\n    query allSupports {\n        allSupports {\n            id\n            title\n            description\n            supportfileSet {\n                id\n                file\n            }\n            supportgroupSet {\n                group {\n                    id\n                }\n            }\n        }\n    }\n"]))),I=(0,_.Ps)(r||(r=(0,T.Z)(["\n    mutation createSupport ($description: String, $title: String){\n        createSupport (description: $description, title: $title) {\n            support {\n                id\n            }\n        }\n    }\n"]))),z=(0,_.Ps)(s||(s=(0,T.Z)(["\n    mutation updateSupport ($description: String, $id: Int, $title: String){\n        updateSupport (description: $description, id: $id, title: $title) {\n            support {\n                id\n            }\n        }\n    }\n"]))),q=(0,_.Ps)(o||(o=(0,T.Z)(["\n    mutation deleteSupport ($id: Int){\n        deleteSupport (id: $id) {\n            support {\n                title\n            }\n        }\n    }\n"]))),B=(0,_.Ps)(c||(c=(0,T.Z)(["\n    mutation createSupportFile ($support: Int, $file: Upload) {\n        createSupportFile (support: $support, file: $file) {\n            supportFile {\n                id\n            }\n        }\n    }\n"]))),G=((0,_.Ps)(a||(a=(0,T.Z)(["\n    mutation deleteSupportFile ($id: Int) {\n        deleteSupportFile (id: $id) {\n            supportFile {\n                file\n            }\n        }\n    }\n"]))),(0,_.Ps)(l||(l=(0,T.Z)(["\n    mutation attachOrDetachSupportGroup($group: Int, $support: Int){\n        attachOrDetachSupportGroup (group: $group, support: $support){\n            supportGroup {\n                __typename\n            }\n        }\n    }\n"])))),L=n(82630),M=n(48936),R=n(80184);var H=function(e){var t=e.refetch,n=e.handleCancel,i=e.type,r=e.formDatas,s=k.Z.useForm(),o=(0,u.Z)(s,1)[0],c=$.Z.Option,a=N.Z.TextArea,l=(0,d.useState)([]),p=(0,u.Z)(l,2),f=p[0],m=p[1],h=(0,d.useState)([]),Z=(0,u.Z)(h,2),j=Z[0],g=Z[1],v=(0,F.D)(G,{onCompleted:function(e){t()}}),S=(0,u.Z)(v,1)[0],C=(0,F.D)(I,{onCompleted:function(e){n(),x.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),j.map((function(t){return S({variables:{group:t,support:e.createSupport.support.id}})}))}}),b=(0,u.Z)(C,2),y=b[0],w=b[1].loading,T=(0,F.D)(z,{onCompleted:function(e){n(),x.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430")}}),_=(0,u.Z)(T,1)[0];function D(e){"edit"===i&&S({variables:{group:e,support:r.id}})}return(0,O.a)(M.YO,{onCompleted:function(e){m(e.allGroups)}}),(0,d.useEffect)((function(){if("edit"===i){var e={description:r.description,title:r.title,group:r.supportgroupSet.map((function(e){return e.group.id}))};o.setFieldsValue(e)}else o.resetFields()}),[r,i,o]),(0,R.jsx)(P.Z,{spinning:w,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,R.jsxs)(k.Z,{id:"SupportForm",layout:"vertical",form:o,name:"lesson",onFinish:function(e){g(e.group),"create"===i?y({variables:e}):"edit"===i&&(e.id=r.id,_({variables:e}))},children:[(0,R.jsx)(k.Z.Item,{name:"title",label:(0,R.jsx)(L.Z,{id:"title"}),rules:[{required:!0,message:(0,R.jsx)(L.Z,{id:"form.required"})}],children:(0,R.jsx)(N.Z,{})}),(0,R.jsx)(k.Z.Item,{name:"group",label:(0,R.jsx)(L.Z,{id:"group"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,R.jsx)($.Z,{mode:"multiple",onDeselect:function(e){return D(e)},onSelect:function(e){return D(e)},children:f.map((function(e,t){return(0,R.jsx)(c,{value:e.id,children:e.name},t)}))})}),(0,R.jsx)(k.Z.Item,{name:"description",label:(0,R.jsx)(L.Z,{id:"description"}),rules:[{required:!0,message:(0,R.jsx)(L.Z,{id:"form.required"})}],children:(0,R.jsx)(a,{rows:4})})]})})},V=n(68470),A=n(38937),E=n(96710),U=n(59305),W=n(10586),K=n(6491),Y=p.Z.Title,J=p.Z.Paragraph,Q=f.Z.confirm,X=function(e){var t=e.supports,n=e.setSelectedSupport;return(0,R.jsx)("div",{className:"w-100",children:(0,R.jsx)(m.Z,{defaultSelectedKeys:"support-".concat(0),mode:"inline",children:t.map((function(e,t){return(0,R.jsx)(m.Z.Item,{onClick:function(){n(e)},children:(0,R.jsx)("span",{children:e.title})},"support-".concat(t))}))})})},ee=function(e){var t,n=(0,d.useState)(!1),i=(0,u.Z)(n,2),r=i[0],s=i[1],o=(0,d.useState)([]),c=(0,u.Z)(o,2),a=c[0],l=c[1],m=(0,d.useState)(),k=(0,u.Z)(m,2),$=k[0],N=k[1],P=(0,d.useState)(!1),T=(0,u.Z)(P,2),_=T[0],I=(T[1],(0,d.useState)(1)),z=(0,u.Z)(I,2),G=z[0],M=z[1],ee=(0,d.useState)(null),te=(0,u.Z)(ee,2),ne=te[0],ie=te[1],re=(0,d.useState)(),se=(0,u.Z)(re,2),oe=se[0],ce=se[1],ae={createSupport:(0,S.C)("add_support"),editSupport:(0,S.C)("change_support"),deleteSupport:(0,S.C)("delete_support"),createFile:(0,S.C)("add_supportfile")},le=(0,O.a)(D,{onCompleted:function(e){l(e.allSupports),e.allSupports[0]?N(e.allSupports[0]):N()}}),ue=le.loading,de=le.refetch,pe=(0,F.D)(q,{onCompleted:function(e){x.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430"),de()}}),fe=(0,u.Z)(pe,1)[0],me=(0,F.D)(B,{onCompleted:function(e){x.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),de()}}),xe=(0,u.Z)(me,2),he=xe[0],Ze=xe[1].loading;var je=function(e){s(!0),ce(e)},ge=function(){s(!1)},ve=function(){M(G-1)},Se=function(){M(G+1)},Ce=function(e){var t=e.file;switch(function(e){switch(e.split(".").pop()){case"jpg":case"jpeg":case"webp":case"svg":case"png":return"image";case"mp3":case"m4a":case"flac":return"audio";case"mp4":return"video";case"pdf":return"pdf";default:return U._O+e}}(t)){case"audio":return(0,R.jsx)(E.Z,{className:"react-player",width:"100%",height:"50px",controls:!0,url:U._O+t});case"video":return(0,R.jsx)(E.Z,{width:"100%",height:"100%",controls:!0,url:U._O+t});case"image":return(0,R.jsx)(h.Z,{bodyStyle:{padding:0},cover:(0,R.jsx)("div",{className:"p-2",children:(0,R.jsx)(Z.Z,{className:"img-fluid",alt:"Preview",src:U._O+t,preview:!1})})});case"pdf":return(0,R.jsxs)("div",{children:[(0,R.jsxs)(f.Z,{forceRender:!0,width:"80vw",visible:_,onCancel:ge,footer:[(0,R.jsx)(j.Z,{type:"text",disabled:1===G&&!0,onClick:ve,children:(0,R.jsx)(L.Z,{id:"main.previous"})},"back"),(0,R.jsx)(j.Z,{type:"primary",disabled:G===ne&&!0,onClick:Se,children:(0,R.jsx)(L.Z,{id:"main.next"})},"next")],children:[(0,R.jsx)(W.SizeMe,{monitorHeight:!0,refreshRate:128,refreshMode:"debounce",render:function(e){var n=e.size;return(0,R.jsx)(K.BB,{file:U._O+t,onLoadSuccess:function(e){var t=e.numPages;return ie(t)},renderTextLayer:!1,loading:(0,R.jsx)(A.Z,{cover:"content"}),renderMode:"svg",children:(0,R.jsx)(K.T3,{className:"test",width:n.width,pageNumber:G,renderTextLayer:!1,renderAnnotationLayer:!1})})}}),(0,R.jsxs)("p",{children:["\u041d\u0438\u0439\u0442 ",ne," \u0445\u0443\u0443\u0434\u0441\u0430\u0430\u0441 ",G,"-\u0433 \u0445\u0430\u0440\u0443\u0443\u043b\u0436 \u0431\u0430\u0439\u043d\u0430 "]})]}),(0,R.jsx)(j.Z,{type:"primary",onClick:je,children:(0,R.jsx)(L.Z,{id:"show-file"})})]});default:return(0,R.jsx)("div",{children:(0,R.jsx)(j.Z,{type:"primary",onClick:function(){return window.open(U._O+t,"_blank")},children:(0,R.jsx)(L.Z,{id:"show-file"})})})}};return ue?(0,R.jsx)(A.Z,{cover:"content"}):(0,R.jsxs)(R.Fragment,{children:[ae.createSupport&&(0,R.jsx)(V.Z,{justifyContent:"end",alignItems:"center",className:"",children:(0,R.jsxs)("div",{className:"mb-4",children:[(0,R.jsx)(j.Z,{type:"primary",onClick:function(){return je("create")},icon:(0,R.jsx)(C.Z,{}),children:"\u041d\u044d\u043c\u044d\u0445"}),(0,R.jsx)(f.Z,{visible:r,okButtonProps:{form:"SupportForm",key:"submit",htmlType:"submit"},okText:(0,R.jsx)(L.Z,{id:"main.okText"}),cancelText:(0,R.jsx)(L.Z,{id:"main.cancelText"}),onCancel:ge,children:(0,R.jsx)(H,{formDatas:$,type:oe,refetch:de,handleCancel:ge})})]})}),(0,R.jsx)(v.Z,{sideContent:(0,R.jsx)(X,{supports:a,setSelectedSupport:N}),mainContent:(0,R.jsx)("div",{className:"p-4",children:$&&(0,R.jsxs)("div",{className:"container-fluid",children:[ae.createFile&&(0,R.jsx)(g.Z,{multiple:!0,accept:".jpg, .png, .pdf, .mp3, .mp4, .m4a",orientation:"right",customRequest:function(e){he({variables:{file:e.file,support:$.id}}),e.onSuccess("Ok")},showUploadList:!1,children:(0,R.jsxs)(j.Z,{style:{float:"right"},size:"small",type:"primary",icon:(0,R.jsx)(b.Z,{}),loading:Ze,children:[" ",(0,R.jsx)(L.Z,{id:"main.upload-file"})," "]})}),ae.deleteSupport&&(0,R.jsxs)(j.Z,{className:"float-right",size:"small",type:"danger",onClick:function(){return e=$.id,void Q({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){fe({variables:{id:e}})}});var e},icon:(0,R.jsx)(y.Z,{}),children:[" ",(0,R.jsx)(L.Z,{id:"delete"})," "]}),ae.deleteSupport&&(0,R.jsxs)(j.Z,{className:"float-right mr-4 bg-yellow-400",size:"small",onClick:function(){return je("edit")},icon:(0,R.jsx)(w.Z,{}),children:[" ",(0,R.jsx)(L.Z,{id:"edit"})," "]}),(0,R.jsxs)(p.Z,{children:[(0,R.jsx)(Y,{children:$.title}),(0,R.jsxs)(J,{children:[" ",$.description," "]})]}),null===(t=$.supportfileSet)||void 0===t?void 0:t.map((function(e,t){return(0,R.jsx)(Ce,{file:e.file},t)}))]})}),sideContentWidth:300,sideContentGutter:!1,border:!0})]})}},31549:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(1413),r=n(72791),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=n(8711),c=function(e,t){return r.createElement(o.Z,(0,i.Z)((0,i.Z)({},e),{},{ref:t,icon:s}))};c.displayName="PlusCircleOutlined";var a=r.forwardRef(c)},14601:function(){},32767:function(){},28251:function(){},57677:function(){},1543:function(){},87324:function(){}}]);
//# sourceMappingURL=1210.b016bf7c.chunk.js.map